{"level":"error","message":"Error handling post creation event Search is not defined","service":"post-service","stack":"ReferenceError: Search is not defined\n    at handlePostCreated (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\src\\eventHandler\\search-event-handlers.js:6:27)\n    at C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\src\\utils\\rabbitmq.js:38:7\n    at Channel.dispatchMessage (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\amqplib\\lib\\channel.js:485:14)\n    at Channel.handleDelivery (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\amqplib\\lib\\channel.js:494:17)\n    at Channel.emit (node:events:518:28)\n    at C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\amqplib\\lib\\channel.js:391:10\n    at Channel.content [as handleMessage] (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\amqplib\\lib\\channel.js:444:9)\n    at Channel.acceptMessageFrame (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\amqplib\\lib\\channel.js:228:33)\n    at Channel.accept (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\amqplib\\lib\\channel.js:298:19)\n    at Connection.mainAccept [as accept] (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\amqplib\\lib\\connection.js:579:33)","timestamp":"2025-02-23T13:57:27.171Z"}
{"code":11000,"errorLabelSet":{},"errorResponse":{"code":11000,"errmsg":"E11000 duplicate key error collection: test.searches index: userId_1 dup key: { userId: \"67b5aa1579f0f7b5aa11aedd\" }","index":0,"keyPattern":{"userId":1},"keyValue":{"userId":"67b5aa1579f0f7b5aa11aedd"}},"index":0,"keyPattern":{"userId":1},"keyValue":{"userId":"67b5aa1579f0f7b5aa11aedd"},"level":"error","message":"Error handling post creation event E11000 duplicate key error collection: test.searches index: userId_1 dup key: { userId: \"67b5aa1579f0f7b5aa11aedd\" }","service":"post-service","stack":"MongoServerError: E11000 duplicate key error collection: test.searches index: userId_1 dup key: { userId: \"67b5aa1579f0f7b5aa11aedd\" }\n    at InsertOneOperation.execute (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\mongodb\\lib\\operations\\insert.js:51:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async tryOperation (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:207:20)\n    at async executeOperation (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async Collection.insertOne (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\mongodb\\lib\\collection.js:157:16)","timestamp":"2025-02-23T14:00:49.723Z"}
{"_message":"Search validation failed","errors":{"content":{"kind":"required","message":"Path `content` is required.","name":"ValidatorError","path":"content","properties":{"message":"Path `content` is required.","path":"content","type":"required"}},"createdAt":{"kind":"required","message":"Path `createdAt` is required.","name":"ValidatorError","path":"createdAt","properties":{"message":"Path `createdAt` is required.","path":"createdAt","type":"required"}}},"level":"error","message":"Error handling post creation event Search validation failed: content: Path `content` is required., createdAt: Path `createdAt` is required.","service":"post-service","stack":"ValidationError: Search validation failed: content: Path `content` is required., createdAt: Path `createdAt` is required.\n    at Document.invalidate (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\mongoose\\lib\\document.js:3329:32)\n    at C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\mongoose\\lib\\document.js:3090:17\n    at C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\node_modules\\mongoose\\lib\\schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:85:11)","timestamp":"2025-02-23T14:08:31.192Z"}
{"level":"error","message":"Failed to start search service handlePostDeleted is not defined","service":"post-service","stack":"ReferenceError: handlePostDeleted is not defined\n    at startServer (C:\\Users\\91639\\Desktop\\NODE.js 2025\\social-media-microservices\\search-service\\src\\server.js:68:40)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-02-23T14:12:08.127Z"}
